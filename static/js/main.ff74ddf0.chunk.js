(this["webpackJsonpaaditya-frontend-dobby"]=this["webpackJsonpaaditya-frontend-dobby"]||[]).push([[0],{18:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),c=a.n(s),r=a(19),o=a.n(r),i=(a(26),a(4)),l=a(2),u=a(6),d=(a(27),a(5)),j=a.n(d),p=function(){var e=Object(s.useContext)(x),t=e.state,a=e.dispatch,c=Object(l.f)();return Object(n.jsx)("nav",{children:Object(n.jsxs)("div",{className:"nav-wrapper white",children:[Object(n.jsx)(u.b,{to:t?"/":"/signup",className:"brand-logo logo a"}),",",Object(n.jsx)("ul",{id:"nav-mobile",className:"right ullu",children:t?[Object(n.jsx)("li",{children:Object(n.jsx)(u.b,{className:"a",to:"/",children:"Profile"})}),Object(n.jsx)("li",{children:Object(n.jsx)(u.b,{className:"a",to:"/create",children:"Post"})}),Object(n.jsx)("li",{children:Object(n.jsx)("button",{className:"btn #5c6bc0 indigo lighten",type:"submit",name:"action",onClick:function(){fetch("https://evening-plateau-36916.herokuapp.com/api/v1/users/logout",{headers:new Headers({Authorization:"Bearer ".concat(localStorage.getItem("jwt"))})}).then((function(e){j.a.toast({html:"Logged-Out successfully",classes:"#43a047 green darken-1"}),localStorage.clear(),a({type:"CLEAR"}),c.push("/login")}))},children:"logout"})})]:[Object(n.jsx)("li",{children:Object(n.jsx)(u.b,{className:"a",to:"/login",children:"Login"})}),Object(n.jsx)("li",{children:Object(n.jsx)(u.b,{className:"a",to:"/signup",children:"Signup"})})]})]})})},h=(a(18),function(){var e=Object(s.useContext)(x),t=(e.state,e.dispatch),a=Object(l.f)(),c=Object(s.useState)(""),r=Object(i.a)(c,2),o=r[0],d=r[1],p=Object(s.useState)(""),h=Object(i.a)(p,2),b=h[0],m=h[1];return Object(n.jsx)("div",{className:"my-card",children:Object(n.jsxs)("div",{className:"card auth-card input-field",children:[Object(n.jsx)("input",{type:"text",placeholder:"Your Email",value:o,onChange:function(e){return d(e.target.value)}}),Object(n.jsx)("input",{type:"password",placeholder:"Your Password",value:b,onChange:function(e){return m(e.target.value)}}),Object(n.jsx)("button",{className:"btn #5c6bc0 indigo lighten",type:"submit",name:"action",onClick:function(){fetch("https://evening-plateau-36916.herokuapp.com/api/v1/users/login",{method:"post",headers:new Headers({Authorization:"Bearer ".concat(localStorage.getItem("jwt")),"Content-Type":"application/json"}),body:JSON.stringify({email:o,password:b})}).then((function(e){return e.json()})).then((function(e){"success"===e.status?(j.a.toast({html:"Logged-In successfully}",classes:"#43a047 green darken-1"}),localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.data.user)),t({type:"USER",payload:e.data.user}),a.push("/")):"Fail"===e.status?e.error&&j.a.toast({html:e.message,classes:"#c62828 red darken-1"}):j.a.toast({html:"Please check your network connection",classes:"#c62828 red darken-1"})}))},children:"Login"}),Object(n.jsx)("h6",{className:"underline",children:Object(n.jsx)(u.b,{to:"/signup",children:"Don't have an account ?"})})]})})}),b=function(){var e=Object(l.f)(),t=Object(s.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1],o=Object(s.useState)(""),d=Object(i.a)(o,2),p=d[0],h=d[1],b=Object(s.useState)(""),m=Object(i.a)(b,2),O=m[0],g=m[1],f=Object(s.useState)(""),y=Object(i.a)(f,2),v=y[0],N=y[1],S=Object(s.useContext)(x),w=(S.state,S.dispatch);return Object(n.jsx)("div",{className:"my-card",children:Object(n.jsxs)("div",{className:"card auth-card input-field",children:[Object(n.jsx)("input",{type:"text",placeholder:"Your email",value:p,onChange:function(e){return h(e.target.value)}}),Object(n.jsx)("input",{type:"text",placeholder:"Your name",value:c,onChange:function(e){return r(e.target.value)}}),Object(n.jsx)("input",{type:"password",placeholder:"password",value:O,onChange:function(e){return g(e.target.value)}}),Object(n.jsx)("input",{type:"password",placeholder:"password Confirm",value:v,onChange:function(e){return N(e.target.value)}}),Object(n.jsx)("button",{className:"btn #5c6bc0 indigo lighten",type:"submit",name:"action",onClick:function(){fetch("https://evening-plateau-36916.herokuapp.com/api/v1/users/signup",{method:"post",headers:new Headers({Authorization:"Bearer ".concat(localStorage.getItem("jwt")),"Content-Type":"application/json"}),body:JSON.stringify({name:c,email:p,password:O,passwordConfirm:v})}).then((function(e){return e.json()})).then((function(t){"success"===t.status?(j.a.toast({html:"Signed-Up successfully}",classes:"#43a047 green darken-1"}),localStorage.setItem("jwt",t.token),localStorage.setItem("user",JSON.stringify(t.data.user)),w({type:"USER",payload:t.data.user}),e.push("/")):"error"===t.status?(t.error.errors.name&&j.a.toast({html:t.error.errors.name.message,classes:"#c62828 red darken-1"}),t.error.errors.email&&j.a.toast({html:t.error.errors.email.message,classes:"#c62828 red darken-1"}),t.error.errors.password&&j.a.toast({html:t.error.errors.password.message,classes:"#c62828 red darken-1"}),t.error.errors.passwordConfirm&&j.a.toast({html:t.error.errors.passwordConfirm.message,classes:"#c62828 red darken-1"})):j.a.toast({html:"Please check your network connection",classes:"#c62828 red darken-1"})}))},children:"Sign up"}),Object(n.jsx)("h6",{className:"underline",children:Object(n.jsx)(u.b,{to:"/login",children:"Already have an account ?"})})]})})},m=(a(32),function(){var e=Object(s.useContext)(x),t=e.state,a=(e.dispatch,Object(s.useState)([])),c=Object(i.a)(a,2),r=c[0],o=c[1],l=Object(s.useState)(""),u=Object(i.a)(l,2),d=u[0],j=u[1];Object(s.useEffect)((function(){setTimeout((function(){fetch("https://evening-plateau-36916.herokuapp.com/api/v1/posts/",{headers:new Headers({Authorization:"Bearer ".concat(localStorage.getItem("jwt"))})}).then((function(e){return e.json()})).then((function(e){console.log(e),o(e.data.myPosts)}))}),5e3)}),[]);var p=r.filter((function(e){return e.name.toLowerCase().includes(d.toLowerCase())}));return Object(n.jsxs)("div",{className:"parent",children:[Object(n.jsxs)("div",{className:"",children:[Object(n.jsx)("h3",{className:"center",children:"Search your pic"}),Object(n.jsx)("form",{className:"center",children:Object(n.jsx)("input",{type:"text",onChange:function(e){j(e.target.value)},placeholder:"Search"})})]}),Object(n.jsx)("div",{className:"parent2",style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",borderBottom:"1px solid black",gridTemplateColumns:"30% 70%"},children:Object(n.jsxs)("div",{style:{display:"flex"},className:"",children:[Object(n.jsxs)("div",{className:"para",children:[Object(n.jsx)("p",{className:"up",children:"Name:"}),Object(n.jsx)("p",{className:"down",children:t?t.name:"Loading"})]}),Object(n.jsxs)("div",{className:"para",children:[Object(n.jsx)("p",{className:"up",children:"Posts:"}),Object(n.jsx)("p",{className:"down",children:p.length})]})]})}),Object(n.jsx)("div",{className:"gallary",children:p.map((function(e){return Object(n.jsxs)("div",{className:"item",children:[Object(n.jsx)("img",{style:{width:"100%"},alt:e.name,src:e.photo},e._id),Object(n.jsx)("h3",{style:{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"bold",marginTop:"0px",paddingTop:"0px",marginBottom:"10px"},children:e.name})]})}))})]})}),O=(a(33),function(){var e=Object(l.f)(),t=Object(s.useState)(""),a=Object(i.a)(t,2),c=a[0],r=a[1],o=Object(s.useState)(""),u=Object(i.a)(o,2),d=u[0],p=u[1],h=Object(s.useState)(""),b=Object(i.a)(h,2),m=b[0],O=b[1];Object(s.useEffect)((function(){m&&fetch("https://evening-plateau-36916.herokuapp.com/api/v1/posts/uploadPost",{method:"post",headers:new Headers({Authorization:"Bearer ".concat(localStorage.getItem("jwt")),"Content-Type":"application/json"}),body:JSON.stringify({name:c,photo:m})}).then((function(e){return e.json()})).then((function(t){"success"===t.status?(j.a.toast({html:"Post Created successfully}",classes:"#43a047 green darken-1"}),e.push("/")):(t.status,t&&j.a.toast({html:"Something went wrong",classes:"#c62828 red darken-1"}))}))}),[m]);return Object(n.jsxs)("div",{className:"card input-filled",style:{margin:"26px auto",maxWidth:"500px",padding:"20px",textAlign:"center"},children:[Object(n.jsx)("h2",{style:{fontFamily:"Grand Hotel,cursive"},children:"Create Memories"}),Object(n.jsx)("input",{type:"text",placeholder:"name",value:c,onChange:function(e){return r(e.target.value)}}),Object(n.jsxs)("div",{className:"file-field input-field",children:[Object(n.jsxs)("div",{className:"btn #5c6bc0 indigo lighten",children:[Object(n.jsx)("span",{children:"Upload Photo"}),Object(n.jsx)("input",{type:"file",onChange:function(e){return p(e.target.files[0])}})]}),Object(n.jsx)("div",{className:"file-path-wrapper",children:Object(n.jsx)("input",{className:"file-path validate",type:"text"})})]}),Object(n.jsx)("button",{className:"btn #5c6bc0 indigo lighten",type:"submit",name:"action",onClick:function(){return function(){var t=new FormData;t.append("file",d),t.append("upload_preset","Be-Social"),t.append("cloud_name","aaditya-dhanraj"),fetch("https://api.cloudinary.com/v1_1/aaditya-dhanraj/image/upload",{method:"post",body:t}).then((function(e){return e.json()})).then((function(t){O(t.secure_url),m||e.push("/")}))}()},children:"Submit"})]})}),g=function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:e},x=Object(s.createContext)(),f=function(){var e=Object(l.f)(),t=Object(s.useContext)(x),a=(t.state,t.dispatch);return Object(s.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t?a({type:"USER",payload:t}):e.push("/login")}),[]),Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",children:Object(n.jsx)(m,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/signup",children:Object(n.jsx)(b,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/login",children:Object(n.jsx)(h,{})}),Object(n.jsx)(l.a,{exact:!0,path:"/create",children:Object(n.jsx)(O,{})})]})};var y=function(){var e=Object(s.useReducer)(g,null),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.jsx)(x.Provider,{value:{state:a,dispatch:c},children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(p,{}),Object(n.jsx)(f,{})]})})},v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,35)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(y,{})}),document.getElementById("root")),v()}},[[34,1,2]]]);
//# sourceMappingURL=main.ff74ddf0.chunk.js.map